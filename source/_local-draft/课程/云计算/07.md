---
title: Advanced Cloud
date: 2024/02/29
tags: [CUHK, 云计算]
categories: 课程
recommend: false
locate: 香港
copyright: 原创
mathjax: true
cover: /img/pageimage/0027.png
---

# CAP, Eventual, and CRDT

## CAP theorem

- Consistency
  - Every read receives the most recent write or an error.
- Availability
  - Every request receives a (non-error) response, without the guarantee that it contains the most recent write.
- Partition tolerance
  - The system continues to operate despite an arbitrary number of messages being dropped (or delayed) by the network between nodes.

CAP - only choose two

when a network partition failure happens, choose one of CA

**preferto keep A, so sacrifice C**

## Eventual Consistency Application

Amazon's shopping-cart implementation

2-phase set S = A + R

- Add(X):
  - A.insert(X)
- Del(X):
  - R.insert(X)
- Merge(S1, S2):
  - = S1.A U S2.A
  - = S1.R U S2.R
- View()
  - Return (A-R)

CRDT

- CmRDT
- CvRDT

# Zookeeper

Goal: High Performance Replicated State Machine

Raft's performance(back-of-the-envelop) -- too slow

zookeeper's throughput
