---
title: Image processing and computer vision
date: 2024/01/10
tags: [CUHK, 计算机视觉]
categories: 课程
recommend: false
locate: 香港
copyright: 原创
mathjax: true
cover: /img/pageimage/0010.png
---

# Camera models and parameters

章节内容

- 相机的数学模型
- 相机的固有(静态)参数
- 相机的外部参数
- 投影矩阵
- 相机标定(camera calibration)

## 1. 点向量 与 旋转/平移矩阵

## 2. 相机坐标到图像平面

$$
x = F \times \frac{X_{c}}{Z_{c}} \\
y = F \times \frac{Y_{c}}{Z_{c}}
$$

其中 F 为焦距，3D 空间的坐标为$[X_{c},Y_{c},Z_{c}]^{T}$，2D 图片的点位置为$[x,y]^{T}$，单位均为米

> e.g.
>
> F = 5mm, Z = 1 meter
>
> A tree is 2 meters high, 0.5 meters wide
>
> Q: What is the value of the height (y) of the tree appearing in the image?
>
> A: 5mm \* 2meter / 1meter = 10mm

$(o_{x},o_{y})$是图像中心，计算 2D 图片中点的像素位置

$$
u = \frac{F}{s_{x}} \times \frac{X_{c}}{Z_{c}} + o_{x} \\
v = \frac{F}{s_{y}} \times \frac{Y_{c}}{Z_{c}} + o_{y}
$$

> Q: The camera CCD has 1024 x 768 pixels, and the size of the CCD is 5mm x 3.75mm
>
> A: $S_{x}$ = 5mm / 1024 = 4.88um; $S_y$= 3.75mm / 768 = 4.88um

### 内部参数

3D=$X_c, Y_c, Z_c$ in meters

Image=u,v in pixels

s= arbitrary rating factor

其中 M 为内部参数矩阵

$$
\begin{aligned}
&\begin{bmatrix}
s * u \\
s * v \\
s
\end{bmatrix}
= M_{int}
\begin{bmatrix}
X_{c} \\
Y_{c} \\
Z_{c}
\end{bmatrix} \\
&M_{int} =
\begin{bmatrix}
f & 0 & o_x \\
0 & f & o_y \\
0 & 0 & 1 \\
\end{bmatrix}_{int} \\
&image\_center = (o_{x}, o_{y}) \\
&f = focal\_length(in pixels)
\end{aligned}
$$

> e.g.
>
> $s_x = s_y = 5.4um$
>
> $(o_x, o_y) = (512, 384) in pixels$
>
> $f = 4.3mm/5.4um = 800 pixels$
>
> $[X_c, Y_c, Z_c]^{T} = [0.02, 0.05, 1.2]^{T}meters$
>
> $M = M_{int}$
>
> Q: $[u \ v]^{T} = ?$
>
> A:
>
> $$
> \begin{aligned}
> &\begin{bmatrix}
> s * u \\
> s * v \\
> s
> \end{bmatrix}
> = M
> \begin{bmatrix}
> X \\ Y \\ Z
> \end{bmatrix}
> =
> \begin{bmatrix}
> 800 & 0 & 512 \\
> 0 & 800 & 384 \\
> 0 & 0 & 1
> \end{bmatrix}
> \begin{bmatrix}
> 0.02 \\ 0.05 \\ 1.2
> \end{bmatrix}_{int}  \\
> & [u  \ v]^{T} = [525.3 , 717.3]^{T}
> \end{aligned}
> $$

### 外部参数

**Camera motion Rotation(R), Translation(T)**
$$
M_{ext} = R_{c(3\times3)} 
\begin{bmatrix}
I_{3} |-T_{c}
\end{bmatrix}_{(3\times 4)}
$$


### 最终结论公式

最终相近内景物成像为 外部景物位置 x 外部参数 x 内部参数
$$
\begin{aligned}
\begin{bmatrix}
s*u \\ s*v \\ s
\end{bmatrix}_{(3\times 1)}
& = M_{int(3\times 3)} * M_{ext(3\times 4)} * 
\begin{bmatrix}
X_{w} \\ Y_{w} \\ Z_{w} \\ 1
\end{bmatrix}_{(4\times 1)}
\end{aligned}
$$
